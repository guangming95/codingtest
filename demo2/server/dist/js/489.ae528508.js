(self["webpackChunkcoding_test"]=self["webpackChunkcoding_test"]||[]).push([[489],{7489:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return T}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("header",{staticClass:"header"},[e("div",{staticClass:"left"},[e("div",{staticClass:"title"},[t._v("Tasks")]),e("div",{staticClass:"user",on:{click:t.openLoginDialog}},[e("i",{staticClass:"el-icon-user-solid"}),e("div",{staticClass:"user-info"},[e("span",{staticClass:"username"},[t._v(t._s(t.userInfo.Name))]),e("span",{staticClass:"email"},[t._v(t._s(t.userInfo.Email))])]),e("el-divider",{attrs:{direction:"vertical"}}),e("i",{staticClass:"el-icon-s-operation"})],1)]),e("div",{staticClass:"operation"},[e("el-select",{attrs:{placeholder:"Filter By assignee",clearable:"",disabled:"Admin"!==t.userInfo.Name,size:"small"},on:{change:t.fetchTaskList},model:{value:t.userEmailfilter,callback:function(e){t.userEmailfilter=e},expression:"userEmailfilter"}},[e("i",{staticClass:"el-input__icon el-icon-s-operation",attrs:{slot:"prefix"},slot:"prefix"}),t._l(t.userOptions,(function(t){return e("el-option",{key:t.Email,attrs:{label:t.Name+" | "+t.Email,value:t.Email}})}))],2)],1)]),t._l(t.phaseList,(function(s,a){return e("PhaseItem",{key:s.title,ref:"phaseItem",refInFor:!0,attrs:{phaseItem:s,phaseList:t.taskList[a],dropFlag:t.dropFlag}})})),e("Login",{ref:"login",attrs:{userInfo:t.userInfo,userOptions:t.userOptions},on:{submit:t.changeUserHandler}})],2)},i=[],r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"phase-item"},[e("div",{staticClass:"phase-aside",style:`background-color: ${t.phaseItem.phaseBackgroundColor}`},[e("h1",{staticClass:"phase-title",style:`color: ${t.phaseItem.titleColor}`},[t._v(t._s(t.phaseItem.title))])]),e("div",{staticClass:"phase-content"},[t.taskData.length?e("el-row",{attrs:{gutter:20}},[e(t.dropFlag?"v-draggable":"div",{tag:"component",attrs:{animation:300},on:{end:t.onEnd},model:{value:t.taskData,callback:function(e){t.taskData=e},expression:"taskData"}},[e("transition-group",{staticClass:"phase-stretch"},t._l(t.taskData,(function(t){return e("el-col",{key:t._id,attrs:{md:8,sm:12}},[e("TaskItem",{attrs:{taskItem:t}})],1)})),1)],1)],1):e("div",{staticClass:"no-task"},[e("p",[t._v("No Task")])])],1)])},o=[],l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"task-item"},[e("p",{staticClass:"task-name"},[t._v(t._s(t.taskItem.Task))]),e("p",{staticClass:"task-info",domProps:{innerHTML:t._s(t.taskItem.Description)}}),e("div",{staticClass:"task-footer"},[e("div",{staticClass:"task-author"},[e("el-avatar",{staticClass:"task-avatar",attrs:{size:"small"}}),t._v(" "+t._s(t.taskItem.By_who)+" ")],1),e("div",{staticClass:"task-priority",style:`background-color: ${t.priorityColor}; color: ${t.taskItem.Priority<3?"#fff":"#000"}`},[t._v("Priority "+t._s(t.taskItem.Priority))])])])},n=[],c=s(7081),u=s.n(c),h={name:"TaskItem",props:{taskItem:{type:Object,default:()=>{}}},data(){return{}},computed:{priorityColor(){return this.taskItem.Priority>5?"rgb(224, 220, 248)":u()(18*this.taskItem.Priority||0,"HEX","#4B33ED","#F1EFF9")}},watch:{},methods:{}},m=h,p=s(1001),f=(0,p.Z)(m,l,n,!1,null,"228f55da",null),d=f.exports,g={name:"PhaseItem",components:{TaskItem:d},props:{phaseItem:{type:Object,default:()=>{}},phaseList:{type:Array,default:()=>[]},dropFlag:{type:Boolean,default:!0}},data(){return{taskData:[]}},watch:{phaseList:{immediate:!0,handler(t){this.taskData=JSON.parse(JSON.stringify(t))}}},methods:{onEnd(){const t=this.taskData.map((({_id:t},e)=>({_id:t,Priority:e+1})));fetch("/api/setTaskSort",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(t)}).then((t=>t.json())).then((()=>{this.taskData=this.taskData.map(((t,e)=>({...t,Priority:e+1})))}))}}},b=g,k=(0,p.Z)(b,r,o,!1,null,"3d6c56f6",null),v=k.exports,y=function(){var t=this,e=t._self._c;return e("div",{staticClass:"login"},[e("el-dialog",{attrs:{title:"Change user","custom-class":"login-dialog","destroy-on-close":"",visible:t.visible},on:{"update:visible":function(e){t.visible=e}}},[e("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"100px"}},[e("el-form-item",{attrs:{label:"User",prop:"Task"}},[e("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Change User",size:"small"},model:{value:t.form.Email,callback:function(e){t.$set(t.form,"Email",e)},expression:"form.Email"}},[e("i",{staticClass:"el-input__icon el-icon-s-el-icon-user",attrs:{slot:"prefix"},slot:"prefix"}),t._l(t.userOptions,(function(t){return e("el-option",{key:t.Email,attrs:{label:t.Name+" | "+t.Email,value:t.Email}})}))],2)],1),e("el-form-item",[e("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.submit}},[t._v("Change")])],1)],1)],1)],1)},C=[],I={name:"Login",props:{userOptions:{type:Array,default:()=>{}},userInfo:{type:Object,default:()=>{}}},data(){return{form:{},visible:!1,rules:{Name:{required:!0,message:"Please select the user",trigger:"change"}}}},watch:{userInfo:{immediate:!0,handler(t){this.form=JSON.parse(JSON.stringify(t))}}},computed:{},beforeMount(){},methods:{open(){this.form=JSON.parse(JSON.stringify(this.userInfo)),this.form.Email=this.userInfo.Email,this.visible=!0},hide(){this.visible=!1},submit(){this.$emit("submit",this.form),this.hide()}}},N=I,_=(0,p.Z)(N,y,C,!1,null,"7827a00c",null),E=_.exports,L={components:{PhaseItem:v,Login:E},data(){return{userOptions:[],userEmailfilter:"",userInfo:{Name:"Admin",Email:"Admin@waterloo.com"},taskList:[],phaseList:[{title:"phase1",phaseBackgroundColor:"#000000",titleColor:"#ffffff"},{title:"phase2",phaseBackgroundColor:"#757575",titleColor:"#ffffff"},{title:"phase3",phaseBackgroundColor:"#ececec",titleColor:"#000000"}],dropFlag:!0}},watch:{},computed:{},beforeMount(){this.fetchUserList(),this.fetchTaskList()},methods:{fetchUserList(){fetch("/api/userList",{headers:{"Content-Type":"application/json"},method:"GET"}).then((t=>t.json())).then((({data:t})=>{this.userOptions=t}))},fetchTaskList(t){const e={Email:t||"",type:"Email"};this.checkDropFlag(),fetch("/api/taskList",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(e)}).then((t=>t.json())).then((({data:t})=>{this.taskList=t}))},openLoginDialog(){this.$refs.login.open()},changeUserHandler(t){this.userInfo.Email=t.Email,this.userInfo.Name=this.userOptions.filter((e=>e.Email===t.Email))[0].Name,"Admin"===this.userInfo.Name?(this.userEmailfilter="",this.fetchTaskList()):(this.userEmailfilter=`${this.userInfo.Name} | ${this.userInfo.Email}`,this.fetchTaskList(t.Email)),this.checkDropFlag()},checkDropFlag(){"Admin"===this.userInfo.Name&&(""===this.userEmailfilter||this.userEmailfilter.indexOf("Admin")>-1)?this.dropFlag=!0:this.dropFlag=!1}}},O=L,x=(0,p.Z)(O,a,i,!1,null,"56cbba18",null),T=x.exports},7081:function(t){function e(){if(arguments.length<4)return void console.log("没有颜色变化范围");let t=arguments[0];var e=/^\d+(\.\d+)?$/;if(!e.test(t)||t<0)return void console.log("第一个参数不是数字或者小于0");let s=arguments[1];if("string"!=r(s)||-1==["RGB","RGBA","HEX","HSLA"].indexOf(s.toUpperCase()))return void console.log("不支持的返回类型");let a,i=Array.prototype.slice.call(arguments,2);function r(t){switch(t.constructor){case Array:return"array";case String:return"string";case Number:return"number";case Object:return"object"}}var o=r(i[0]);for(let f=0;f<i.length;f++)if(r(i[f])!=o)return void console.log("输入色值格式不统一");function l(t){let e="",s=[];if("string"==r(t)&&(e=t),"array"==r(t)){if("number"!=r(t[1]))return!1;e=t[0]}return e.replace(" ",""),e=e.toLocaleUpperCase(),0==e.search("RGBA")?(s=e.slice(5,-1).split(","),4!=s.length&&(s=[])):0==e.search("RGB")?(s=e.slice(4,-1).split(","),3!=s.length&&(s=[])):0==e.search("#")?s=7!=e.length?[]:n(e).slice(4,-1).split(","):0==e.search("HSLA")&&console.log("HSLA开头的,目前不支持"),s}function n(t){let e="rgb("+parseInt("0x"+t.slice(1,3))+","+parseInt("0x"+t.slice(3,5))+","+parseInt("0x"+t.slice(5,7))+")";return e}function c(t,e,s){return"#"+((t<<16)+(e<<8)+s).toString(16).padStart(6,"0")}function u(t,e){switch(console.log(e),t.toUpperCase()){case"HEX":return c(...e);case"RGB":return`rgb(${e[0]}, ${e[1]}, ${e[2]})`;case"RGBA":return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]||1})`}}let h=0;if("array"==o)for(let f=0;f<i.length;f++){if(!l(i[f]).length||"number"!=r(i[f][1])||2!=i[f].length)return void console.log("参数格式不正确");i[f].push(l(i[f]))}if("string"==o){let t=0,e=[];for(let s=0;s<i.length;s++){if(!l(i[s]).length)return void console.log("参数格式不正确");e.push([i[s],t,l(i[s])]),t+=100/(i.length-1)}i=e}if(i.push(["",t,""]),i.sort((function(t,e){return t[1]-e[1]})),i.map(((e,s)=>{e[1]==t&&(h=s)})),0==h)return a=u(s,i[1][2]),a;if(h==i.length-1)return a=u(s,i[i.length-2][2]),console.log(a),a;let m=p(t,i[h-1],i[h+1]);return a=u(s,m),a;function p(t,e,s){let a=(t-e[1])/(s[1]-e[1])*100,i=Number(e[2][0])>Number(s[2][0])?Number(e[2][0])-Math.round(Math.abs(e[2][0]-s[2][0])*a/100):Number(e[2][0])+Math.round(Math.abs(e[2][0]-s[2][0])*a/100),r=Number(e[2][1])>Number(s[2][1])?Number(e[2][1])-Math.round(Math.abs(e[2][1]-s[2][1])*a/100):Number(e[2][1])+Math.round(Math.abs(e[2][1]-s[2][1])*a/100),o=Number(e[2][2])>Number(s[2][2])?Number(e[2][2])-Math.round(Math.abs(e[2][2]-s[2][2])*a/100):Number(e[2][2])+Math.round(Math.abs(e[2][2]-s[2][2])*a/100),l=1;return e[2][3]?(l=Number(e[2][3])>Number(s[2][3])?(Number(e[2][3])-Math.abs(e[2][3]-s[2][3])*a/100).toFixed(2):(Number(e[2][3])+Math.abs(e[2][3]-s[2][3])*a/100).toFixed(2),[i,r,o,Number(l)]):[i,r,o]}}t.exports=e}}]);
//# sourceMappingURL=489.ae528508.js.map